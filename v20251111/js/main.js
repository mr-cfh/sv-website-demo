const FEATURES={enableIntersectionObserver:!0,enableFocusTrap:!0,enableScrollHide:!0,submenuHideDelay:150,resizeDebounce:150,mobileBreakpoint:768};if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector}
if(!Element.prototype.closest){Element.prototype.closest=function(s){let el=this;while(el&&el.nodeType===1){if(el.matches(s))return el;el=el.parentElement||el.parentNode}
return null}}
const utils={qs:(selector,parent=document)=>parent.querySelector(selector),qsa:(selector,parent=document)=>Array.from(parent.querySelectorAll(selector)),mq:window.matchMedia(`(max-width: ${FEATURES.mobileBreakpoint}px)`),onMediaChange(cb){if(this.mq.addEventListener){this.mq.addEventListener('change',cb)}else{this.mq.addListener(cb)}},setAttrs(el,attrs){if(!el)return;Object.entries(attrs).forEach(([key,val])=>el.setAttribute(key,val))}};if('scrollRestoration' in history){history.scrollRestoration='manual'}(()=>{const header=utils.qs('.header');const btn=utils.qs('.header__menu-toggle');const panel=utils.qs('#primary-nav');const overlay=utils.qs('.site-overlay');if(!header||!btn||!panel)return;const syncAria=()=>{panel.setAttribute('aria-hidden',utils.mq.matches)};syncAria();utils.onMediaChange(syncAria);const openMenu=()=>{header.classList.add('header--open');utils.setAttrs(btn,{'aria-expanded':'true'});utils.setAttrs(panel,{'aria-hidden':'false'});utils.qs('a',panel)?.focus({preventScroll:!0})};const closeMenu=()=>{header.classList.remove('header--open');utils.setAttrs(btn,{'aria-expanded':'false'});utils.setAttrs(panel,{'aria-hidden':'true'});utils.qs('#langMenuMobile')?.classList.remove('open')};btn.addEventListener('click',()=>{btn.getAttribute('aria-expanded')==='true'?closeMenu():openMenu()});panel.addEventListener('click',(e)=>{const link=e.target.closest('a');if(!link)return;const isMobile=utils.mq.matches;const parentItem=link.closest('.header__nav-item');const isTopLevel=link.classList.contains('header__nav-link');const hasSub=parentItem?.hasAttribute('data-has-sub');if(!(isMobile&&isTopLevel&&hasSub)){closeMenu()}});overlay?.addEventListener('click',closeMenu);document.addEventListener('keydown',(e)=>{if(e.key==='Escape')closeMenu();});if(FEATURES.enableFocusTrap){document.addEventListener('keydown',(e)=>{if(!header.classList.contains('header--open')||e.key!=='Tab')return;const focusables=utils.qsa('a, button, [tabindex]:not([tabindex="-1"])',header).filter(el=>el.offsetParent!==null);if(!focusables.length)return;const first=focusables[0];const last=focusables[focusables.length-1];if(e.shiftKey&&document.activeElement===first){e.preventDefault();last.focus()}else if(!e.shiftKey&&document.activeElement===last){e.preventDefault();first.focus()}})}})();(()=>{const header=utils.qs('.header');const nav=utils.qs('#primary-nav');const submenu=utils.qs('.submenu');const inner=utils.qs('.submenu__inner');if(!header||!nav||!submenu||!inner)return;let activeKey=null;let overBar=!1;let overNav=!1;let hideTimer=null;const getGroupEl=(key)=>utils.qs(`.submenu__group[data-for="${key}"]`,inner);const hasGroup=(key)=>{const g=getGroupEl(key);return g&&utils.qs('a',g)};const showGroup=(key)=>{utils.qsa('.submenu__group.is-visible',inner).forEach(g=>g.classList.remove('is-visible'));getGroupEl(key)?.classList.add('is-visible')};const clearGroup=()=>{utils.qsa('.submenu__group.is-visible',inner).forEach(g=>g.classList.remove('is-visible'))};const markActive=(key)=>{utils.qsa('.header__nav-item.is-active',nav).forEach(li=>li.classList.remove('is-active'));if(key){utils.qs(`.header__nav-item[data-sub="${key}"]`,nav)?.classList.add('is-active')}};const clearActive=()=>{utils.qsa('.header__nav-item.is-active',nav).forEach(li=>li.classList.remove('is-active'))};const showActive=(key,anchor)=>{activeKey=key;header.setAttribute('data-sub-active',key);if(anchor){const rect=anchor.getBoundingClientRect();const innerLeft=inner.getBoundingClientRect().left;const start=Math.max(0,rect.left-innerLeft);inner.style.setProperty('--submenu-start',`${start}px`)}
showGroup(key);markActive(key)};const hideSubmenu=()=>{activeKey=null;overBar=!1;header.removeAttribute('data-sub-active');clearActive();clearGroup()};const startHideSoon=()=>{clearTimeout(hideTimer);hideTimer=setTimeout(()=>{if(!overBar&&!overNav)hideSubmenu();},FEATURES.submenuHideDelay)};utils.qsa('.header__nav-item',nav).forEach(item=>{const key=item.getAttribute('data-sub');const link=utils.qs('.header__nav-link',item);if(!key||!link)return;const handleEnter=()=>{clearTimeout(hideTimer);hasGroup(key)?showActive(key,link):hideSubmenu()};item.addEventListener('mouseenter',()=>{overNav=!0;handleEnter()});item.addEventListener('focusin',()=>{overNav=!0;handleEnter()});item.addEventListener('mouseleave',()=>{overNav=!1;startHideSoon()});item.addEventListener('focusout',()=>{overNav=!1;startHideSoon()})});submenu.addEventListener('mouseenter',()=>{overBar=!0;clearTimeout(hideTimer)});submenu.addEventListener('mouseleave',()=>{overBar=!1;startHideSoon()});if(FEATURES.enableScrollHide){if(FEATURES.enableIntersectionObserver){const observer=new IntersectionObserver(([entry])=>{if(!entry.isIntersecting&&!overBar){startHideSoon()}});observer.observe(header)}else{window.addEventListener('scroll',()=>{if(!overBar)startHideSoon();})}}})();(()=>{utils.qsa('.header__nav-item').forEach(li=>{const sub=utils.qs(':scope > .subnav',li);if(sub&&utils.qs('li',sub)){li.setAttribute('data-has-sub','true')}});document.addEventListener('DOMContentLoaded',()=>{utils.qsa('.subnav').forEach(ul=>{if(!utils.qs('li',ul))ul.style.display='none'})})})();(()=>{const LANGUAGES={en:{label:'English',announce:'English'},th:{label:'à¹„à¸—à¸¢',announce:'Thai'}};const STORAGE_KEY='sv-lang';const DEFAULT_LANG='en';const SUPPORTED_CODES=Object.keys(LANGUAGES);const I18N_SELECTOR=SUPPORTED_CODES.map(code=>`[data-i18n-${code}]`).join(', ');const desktop={wrap:utils.qs('#langDropdownDesktop'),toggle:utils.qs('#langToggle'),menu:utils.qs('#langMenu')};const mobile={wrap:utils.qs('.mobile-lang'),toggle:utils.qs('#langToggleMobile'),menu:utils.qs('#langMenuMobile')};const isSupported=(code)=>SUPPORTED_CODES.includes(code);const getLangFromURL=()=>{const params=new URLSearchParams(window.location.search);const lang=params.get('lang')?.toLowerCase();return isSupported(lang)?lang:null};const getStoredLang=()=>{const lang=localStorage.getItem(STORAGE_KEY);return isSupported(lang)?lang:null};const buildMenuOptions=(menuEl)=>{if(!menuEl)return;menuEl.innerHTML='';SUPPORTED_CODES.forEach(code=>{const info=LANGUAGES[code]||{};const btn=document.createElement('button');btn.setAttribute('data-lang',code);btn.textContent=info.label||code;menuEl.appendChild(btn)})};const applyLangToDOM=(lang)=>{document.documentElement.setAttribute('lang',lang);utils.qsa(I18N_SELECTOR).forEach(el=>{const txt=el.getAttribute(`data-i18n-${lang}`);if(txt!=null){el.textContent=txt}});const info=LANGUAGES[lang]||{};const label=info.label||lang;const buttonText=`${label} â–¾`;if(desktop.toggle)desktop.toggle.textContent=buttonText;if(mobile.toggle)mobile.toggle.textContent=buttonText};const setLang=(lang,remember=!0)=>{if(!isSupported(lang)){lang=DEFAULT_LANG}
applyLangToDOM(lang);if(remember){localStorage.setItem(STORAGE_KEY,lang)}
const spoken=(LANGUAGES[lang]&&LANGUAGES[lang].announce)||lang;const announcer=document.createElement('div');announcer.setAttribute('role','status');announcer.setAttribute('aria-live','polite');announcer.className='sr-only';announcer.textContent=`Language changed to ${spoken}`;document.body.appendChild(announcer);setTimeout(()=>announcer.remove(),1000)};const urlLang=getLangFromURL();const stored=getStoredLang();const initial=urlLang||stored||DEFAULT_LANG;setLang(initial);buildMenuOptions(desktop.menu);buildMenuOptions(mobile.menu);const openMenu=(toggleBtn,menuEl)=>{if(!toggleBtn||!menuEl)return;menuEl.classList.add('open');utils.setAttrs(toggleBtn,{'aria-expanded':'true'});utils.setAttrs(menuEl,{'aria-hidden':'false'})};const closeMenu=(toggleBtn,menuEl)=>{if(!toggleBtn||!menuEl)return;menuEl.classList.remove('open');utils.setAttrs(toggleBtn,{'aria-expanded':'false'});utils.setAttrs(menuEl,{'aria-hidden':'true'})};const bindDropdown=(toggleBtn,menuEl,isMobile=!1)=>{if(!toggleBtn||!menuEl)return;toggleBtn.addEventListener('click',()=>{const isOpen=menuEl.classList.contains('open');isOpen?closeMenu(toggleBtn,menuEl):openMenu(toggleBtn,menuEl)});menuEl.addEventListener('click',(e)=>{const lang=e.target?.getAttribute('data-lang');if(!lang)return;setLang(lang);closeMenu(toggleBtn,menuEl);if(isMobile){const headerEl=utils.qs('.header');const burgerBtn=utils.qs('.header__menu-toggle');const navPanel=utils.qs('#primary-nav');if(headerEl&&burgerBtn&&navPanel){headerEl.classList.remove('header--open');utils.setAttrs(burgerBtn,{'aria-expanded':'false'});utils.setAttrs(navPanel,{'aria-hidden':'true'})}}});document.addEventListener('click',(e)=>{if(!menuEl.contains(e.target)&&!toggleBtn.contains(e.target)){closeMenu(toggleBtn,menuEl)}});document.addEventListener('keydown',(e)=>{if(e.key==='Escape'){closeMenu(toggleBtn,menuEl)}})};bindDropdown(desktop.toggle,desktop.menu,!1);bindDropdown(mobile.toggle,mobile.menu,!0);const syncPickerA11y=()=>{const mobileView=utils.mq.matches;if(desktop.wrap){const hideDesktop=mobileView;desktop.wrap.setAttribute('aria-hidden',hideDesktop);utils.qsa('button',desktop.wrap).forEach(btn=>{btn.tabIndex=hideDesktop?-1:0})}
if(mobile.wrap){const hideMobile=!mobileView;mobile.wrap.setAttribute('aria-hidden',hideMobile);utils.qsa('button',mobile.wrap).forEach(btn=>{btn.tabIndex=hideMobile?-1:0})}};syncPickerA11y();utils.onMediaChange(syncPickerA11y)})();(()=>{const setupAccordionGroup=(config)=>{const blocks=utils.qsa(config.containerSelector);if(!blocks.length)return;const setBlockState=(block,expand)=>{const header=utils.qs(config.headerSelector,block);const panel=utils.qs(config.panelSelector,block);block.classList.toggle(config.openClass,expand);if(config.ariaOnHeader&&header){header.setAttribute('aria-expanded',String(expand))}
if(panel){panel.setAttribute('aria-hidden',String(!expand))}
if(expand&&config.onOpen)config.onOpen(block);if(!expand&&config.onClose)config.onClose(block);};const closeAllExcept=(blockToKeep)=>{if(!config.closeOthers)return;blocks.forEach(b=>{if(b!==blockToKeep)setBlockState(b,!1);})};const bindMobile=()=>{blocks.forEach(block=>{const header=utils.qs(config.headerSelector,block);const panel=utils.qs(config.panelSelector,block);if(!header||!panel)return;setBlockState(block,!1);if(header._accClick){header.removeEventListener('click',header._accClick);header.removeEventListener('keydown',header._accKey);header._accClick=null;header._accKey=null}
const toggle=(e)=>{e?.preventDefault();const isOpen=block.classList.contains(config.openClass);if(!isOpen)closeAllExcept(block);setBlockState(block,!isOpen)};header._accClick=toggle;header._accKey=(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();toggle()}};header.addEventListener('click',header._accClick);header.addEventListener('keydown',header._accKey)})};const bindDesktop=()=>{blocks.forEach(block=>{const header=utils.qs(config.headerSelector,block);if(!header)return;setBlockState(block,!!config.desktopDefaultOpen);if(header._accClick){header.removeEventListener('click',header._accClick);header.removeEventListener('keydown',header._accKey);header._accClick=null;header._accKey=null}})};let resizeTimeout;const sync=()=>{clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{utils.mq.matches?bindMobile():bindDesktop()},FEATURES.resizeDebounce)};sync();utils.onMediaChange(sync)};setupAccordionGroup({containerSelector:'.footer__section',headerSelector:'.footer__title',panelSelector:'.footer__list',openClass:'footer__section--open',ariaOnHeader:!0,closeOthers:!1,desktopDefaultOpen:!0});const setNavAria=(block,expanded)=>{const header=utils.qs('.header__nav-link',block);const panel=utils.qs('.subnav',block);if(!header||!panel)return;utils.setAttrs(header,{'aria-expanded':String(expanded)});utils.setAttrs(panel,{'aria-hidden':String(!expanded)})};setupAccordionGroup({containerSelector:'.header__nav-item[data-has-sub="true"]',headerSelector:'.header__nav-link',panelSelector:'.subnav',openClass:'header__nav-item--open',ariaOnHeader:!0,closeOthers:!0,desktopDefaultOpen:!1,onOpen(block){setNavAria(block,!0)},onClose(block){setNavAria(block,!1)}})})();(()=>{if(!console||!console.log)return;const features=[{name:'HeaderToggle',el:utils.qs('.header')},{name:'Submenu',el:utils.qs('.submenu')},{name:'LanguageSwitcher',el:utils.qs('#langToggle')},{name:'Accordion',el:utils.qs('.footer__section')}];console.log('ðŸŽ¯ Site JS initialized:');features.forEach(f=>{console.log(`  ${f.name}: ${f.el ? 'âœ“' : 'âœ—'}`)})})()